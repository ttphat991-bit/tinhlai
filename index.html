<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>So s√°nh l√£i su·∫•t ng√¢n h√†ng</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto;background:#f1f5f9;margin:0;padding:16px}
.app{max-width:420px;margin:auto}
.card{background:#fff;border-radius:16px;padding:16px;box-shadow:0 10px 25px rgba(0,0,0,.08);margin-bottom:16px}
h2{text-align:center}
label{font-size:14px;font-weight:600;margin-top:10px;display:block}
input,select{width:100%;padding:10px;margin-top:4px;border-radius:10px;border:1px solid #cbd5e1;font-size:15px}
button{width:100%;padding:12px;border:none;border-radius:14px;background:#2563eb;color:#fff;font-size:16px;font-weight:600;margin-top:12px;cursor:pointer}
.bank{font-weight:700}
.winner{background:#ecfeff;border:2px solid #06b6d4;border-radius:12px;padding:10px;margin-top:10px}
.badge{background:#06b6d4;color:#fff;font-size:12px;padding:2px 8px;border-radius:999px;margin-left:6px}
.state{background:#16a34a}
.private{background:#f97316}
.diff{color:#dc2626;font-weight:600}
</style>
</head>
<body>
<div class="app">
  <div class="card">
    <h2>üí∞ So s√°nh l√£i su·∫•t ng√¢n h√†ng</h2>

    <label>S·ªë ti·ªÅn g·ª≠i (VNƒê)</label>
	<input id="money" type="text"
       value="100.000.000"
       oninput="formatMoney(this);syncSlider()">

<div style="display:flex;gap:8px;margin-top:8px">
  <button type="button" onclick="addMoney(50000000)">+50tr</button>
  <button type="button" onclick="addMoney(100000000)">+100tr</button>
  <button type="button" onclick="addMoney(500000000)">+500tr</button>
</div>

<input id="moneyRange" type="range"
       min="0"
       max="5000000000"
       step="10000000"
       value="100000000"
       oninput="syncInput()">

<div id="moneyUnit"
     style="margin-top:6px;font-weight:600;color:#2563eb"></div>


    <label>K·ª≥ h·∫°n</label>
    <select id="term" onchange="loadDefaultRates()">
      <option value="1">1 th√°ng</option>
      <option value="3">3 th√°ng</option>
      <option value="6">6 th√°ng</option>
      <option value="12" selected>12 th√°ng</option>
      <option value="24">24 th√°ng</option>
      <option value="36">36 th√°ng</option>
    </select>

    <label>H√¨nh th·ª©c</label>
    <select id="type">
      <option value="simple">L√£i cu·ªëi k·ª≥</option>
      <option value="compound">L√£i nh·∫≠p g·ªëc</option>
    </select>

    <label>Ng√¢n h√†ng & l√£i su·∫•t (%/nƒÉm)</label>

    <label><input type="checkbox" id="ck_MB" checked>
      <input class="bank-name" id="name_MB" value="MB Bank">
    </label>
    <input id="rate_MB" type="number" step="0.01" value="5.2">

    <label><input type="checkbox" id="ck_TCB" checked>
      <input class="bank-name" id="name_TCB" value="Techcombank">
    </label>
    <input id="rate_TCB" type="number" step="0.01" value="5.5">

    <label><input type="checkbox" id="ck_VCB" checked>
      <input class="bank-name" id="name_VCB" value="Vietcombank">
    </label>
    <input id="rate_VCB" type="number" step="0.01" value="4.6">

    

    

    

    

    <button onclick="calc()">T√≠nh l√£i</button>

    
  </div>

  <div class="card" id="result"></div>
</div>

<script>
const result = document.getElementById('result');

/* ‚úÖ L√£i su·∫•t m·∫∑c ƒë·ªãnh ‚Äì ƒë∆∞a ra GLOBAL */
const defaultRates = {
  1:  { MB:4.5, TCB:4.35, VCB:2.1},
  3:  { MB:4.65, TCB:4.65, VCB:2.4},
  6:  { MB:5.3, TCB:5.85, VCB:3.5},
  12: { MB:5.55, TCB:5.95, VCB:5.2},
  24: { MB:6.2, TCB:5.95, VCB:5.3},
  36: { MB:6.3, TCB:6.1, VCB:5.4}
};

function money(n){
  if(isNaN(n)) return '0 ƒë';
  return Number(n).toLocaleString('vi-VN')+' ƒë';
}

function loadDefaultRates(){
  const term = document.getElementById('term').value;
  const rates = defaultRates[term];
  if(!rates) return;
  Object.keys(rates).forEach(id=>{
    const input = document.getElementById('rate_'+id);
    if(input) input.value = rates[id];
  });
}

/* ===== MONEY ===== */
function formatMoney(input){
  let v = input.value.replace(/[^0-9]/g,'');
  input.value = v ? Number(v).toLocaleString('vi-VN') : '';
  syncSlider();
}

function addMoney(amount){
  let cur = Number(document.getElementById('money').value.replace(/\D/g,'')) || 0;
  let total = cur + amount;
  document.getElementById('money').value = total.toLocaleString('vi-VN');
  document.getElementById('moneyRange').value = total;
  updateUnit(total);
}

function syncSlider(){
  let v = Number(document.getElementById('money').value.replace(/\D/g,'')) || 0;
  document.getElementById('moneyRange').value = v;
  updateUnit(v);
}

function syncInput(){
  let v = Number(document.getElementById('moneyRange').value);
  document.getElementById('money').value = v.toLocaleString('vi-VN');
  updateUnit(v);
}

function updateUnit(v){
  const el = document.getElementById('moneyUnit');
  if(v >= 1e9) el.textContent = (v/1e9).toFixed(2)+' t·ª∑';
  else if(v >= 1e6) el.textContent = Math.round(v/1e6)+' tri·ªáu';
  else el.textContent = money(v);
}

/* ===== CALC ===== */
function calc(){
  const m = Number(document.getElementById('money').value.replace(/\D/g,''));
  if(!m){result.innerHTML='‚ö†Ô∏è Nh·∫≠p s·ªë ti·ªÅn h·ª£p l·ªá';return;}

  const term = Number(document.getElementById('term').value);
  const type = document.getElementById('type').value;

  const banks=[
    {id:'MB',  type:'state',   label:'Nh√† n∆∞·ªõc'},
    {id:'TCB', type:'private', label:'T∆∞ nh√¢n'},
    {id:'VCB', type:'state',   label:'Nh√† n∆∞·ªõc'}
  ];

  let data=[];

  banks.forEach(b=>{
    if(!document.getElementById('ck_'+b.id).checked) return;

    const rate = Number(document.getElementById('rate_'+b.id).value);
    if(!rate) return;

    const interest = type==='compound'
      ? m * Math.pow(1 + rate/100, term/12) - m
      : m * rate/100 * term/12;

    const name = document.getElementById('name_'+b.id).value || b.id;

    data.push({
      name,
      rate,
      interest,
      total: m + interest,
      badge: b.label,
      cls: b.type
    });
  });

  if(!data.length){result.innerHTML='‚ö†Ô∏è Kh√¥ng c√≥ ng√¢n h√†ng n√†o';return;}

  data.sort((a,b)=>b.interest-a.interest);
  const max = data[0].interest;

  result.innerHTML = data.map((d,i)=>`
    <div class="${i===0?'winner':''}">
      <div class="bank">
        üè¶ ${d.name}
        <span class="badge ${d.cls}">${d.badge}</span>
        ${i===0?'<span class="badge">L√£i cao nh·∫•t</span>':''}
      </div>
      L√£i su·∫•t: ${d.rate}%/nƒÉm<br>
      Ti·ªÅn l√£i: <b>${money(d.interest)}</b><br>
      T·ªïng nh·∫≠n: <b>${money(d.total)}</b><br>
      ${i?`<span class="diff">K√©m nh·∫•t: -${money(max-d.interest)}</span>`:''}
    </div>
  `).join('');
}

/* load l·∫ßn ƒë·∫ßu */
loadDefaultRates();
updateUnit(100000000);
</script>

</body>
</html>
